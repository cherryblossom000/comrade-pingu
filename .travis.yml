language: node_js
node_js: 16
branches:
  except: repl
before_install: npm i -g pnpm
install: pnpm i
jobs:
  script:
  - pnpm -C packages/commitlint-plugin build
  - pnpx commitlint-travis
  - pnpm build
  - pnpm lint
  - pnpm test
  after_success: scripts/push-docs.sh
  deploy:
  - provider: script
    skip_cleanup: true
    script: scripts/deploy.sh
    on: main
